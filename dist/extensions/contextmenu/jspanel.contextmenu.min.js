/* jspanel.contextmenu.js (c) Stefan Sträßer(Flyer53) <info@jspanel.de> license: MIT */'use strict';jsPanel.contextmenu||(jsPanel.contextmenu={version:'1.0.0',date:'2018-03-16 14:30',defaults:{dragit:!1,resizeit:!1,header:!1,headerControls:'none'},cmOverflow:function(a){var b=a.cmEvent.clientX,c=a.cmEvent.clientY,d=a.offsetWidth,e=a.offsetHeight,f=window.innerWidth-(b+d),g=window.innerHeight-(c+e);0>f&&(a.style.left=b+(window.scrollX||window.pageXOffset)-d+'px'),0>g&&(a.style.top=c+(window.scrollY||window.pageYOffset)-e+'px')},create:function(){var a=this,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'contextmenu';b.paneltype='contextmenu';var d=b.target;return!!d&&void('string'==typeof d&&(d=document.querySelector(d)),d.addEventListener(c,function(c){c.preventDefault(),document.querySelectorAll('.jsPanel-contextmenu').forEach(function(a){a.close()});var e=(c.pageX||c.touches[0].pageX)+'px',f=(c.pageY||c.touches[0].pageY)+'px',g=b;b.config&&(g=Object.assign({},b.config,b),delete g.config),g=Object.assign({},a.defaults,g,{position:!1,container:'body'}),jsPanel.create(g,function(a){jsPanel.setStyle(a,{position:'absolute',left:e,top:f});var b=d.closest('.jsPanel-modal');if(b)a.style.zIndex=b.style.zIndex;else{var g=d.closest('.jsPanel');g&&g.front(),a.style.zIndex=jsPanel.zi.next()}a.cmEvent=c,jsPanel.contextmenu.cmOverflow(a),a.addEventListener('mouseleave',function(){a.close()},!1),a.addEventListener(jsPanel.evtStart,function(a){a.stopPropagation()},!1)})},!1))}},jsPanel.ajaxAlwaysCallbacks.push(function(a){a.classList.contains('jsPanel-contextmenu')&&jsPanel.contextmenu.cmOverflow(a)}),document.addEventListener(jsPanel.pointerdown,function(a){document.querySelectorAll('.jsPanel-contextmenu').forEach(function(b){a.target.closest('.jsPanel-contextmenu')||b.close()})},!1));