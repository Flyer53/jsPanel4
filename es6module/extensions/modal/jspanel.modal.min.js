import{jsPanel}from"../../jspanel.js";jsPanel.modal||(jsPanel.modal={version:"1.2.5",date:"2020-04-26 23:23",defaults:{closeOnEscape:!0,closeOnBackdrop:!0,dragit:!1,headerControls:"closeonly",resizeit:!1,syncMargins:!1},createBackdrop(e){let a=document.getElementsByClassName("jsPanel-modal-backdrop").length,n=document.createElement("div");return n.id="jsPanel-modal-backdrop-"+e,0===a?n.className="jsPanel-modal-backdrop":a>0&&(n.className="jsPanel-modal-backdrop jsPanel-modal-backdrop-multi"),n.style.zIndex=this.ziModal.next(),n},addBackdrop(e){var a=this.createBackdrop(e);return document.body.append(a),a},getBackdrop:e=>document.getElementById(`jsPanel-modal-backdrop-${e}`),removeBackdrop(e){let a=this.getBackdrop(e);if(!a)return;a.classList.add("jsPanel-modal-backdrop-out");let n=1e3*parseFloat(getComputedStyle(a).animationDuration);window.setTimeout(function(){document.body.removeChild(a)},n)},enableCloseOnBackdrop(e,a){jsPanel.pointerup.forEach(function(n){a.addEventListener(n,function(){e.close.call(e,null,!0)})})},create(e={}){e.paneltype="modal",e.id?"function"==typeof e.id&&(e.id=e.id()):e.id=`jsPanel-${jsPanel.idCounter+=1}`;let a,n=e;return"minimized"!==n.setStatus&&(a=this.addBackdrop(n.id)),e.config&&delete(n=Object.assign({},e.config,e)).config,n=Object.assign({},this.defaults,n,{container:"window"}),jsPanel.create(n,e=>{e.style.zIndex=jsPanel.modal.ziModal.next(),e.header.style.cursor="default",e.footer.style.cursor="default","minimized"!==n.setStatus&&n.closeOnBackdrop&&this.enableCloseOnBackdrop(e,a),e.options.onclosed.unshift(function(){return jsPanel.modal.removeBackdrop(n.id),!0}),e.options.onminimized.unshift(function(){return jsPanel.modal.removeBackdrop(n.id),!0}),e.options.onnormalized.unshift(function(){if(!(a=jsPanel.modal.getBackdrop(n.id)))return a=jsPanel.modal.addBackdrop(n.id),e.style.zIndex=jsPanel.modal.ziModal.next(),n.closeOnBackdrop&&this.enableCloseOnBackdrop(e,a),!0})})}},jsPanel.modal.ziModal=(()=>{let e=jsPanel.ziBase+1e4;return{next:function(){return e++}}})());