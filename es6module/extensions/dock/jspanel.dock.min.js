"use strict";import{jsPanel}from"../../jspanel.min.js";function dockPanel(e,i){let t,s={position:{my:"left-top",at:"right-top"},linkSlaveHeight:!1,linkSlaveWidth:!1,callback:!1},o=document.getElementById(this.id);if(this.slaveconfig=Object.assign({},s,e),!(t=this.slaveconfig.master&&1===this.slaveconfig.master.nodeType?this.slaveconfig.master:document.querySelector(this.slaveconfig.master))){if(jsPanel.errorReporting)try{throw new jsPanel.jsPanelError("&#9664; COULD NOT DOCK PANEL &#9658;<br>The master panel does not exist in the document.")}catch(e){jsPanel.error(e),i&&i.call(o,o)}return!1}t.slaves||(t.slaves=new Set),t.handlers||(t.handlers={}),t.handlers.fronted||(t.options.onfronted.push(()=>{let e=t.style.zIndex;return t.slaves.forEach(i=>{i.style.zIndex=e}),!0}),t.handlers.fronted=!0),t.handlers.smallified||(t.options.onsmallified.push(()=>(t.slaves.forEach(e=>{e.smallify().reposition()}),!0)),t.handlers.smallified=!0),t.handlers.unsmallified||(t.options.onunsmallified.push(()=>(t.slaves.forEach(e=>{e.unsmallify().reposition()}),!0)),t.handlers.unsmallified=!0),t.handlers.closed||(t.options.onclosed.push(()=>(t.slaves.forEach(e=>{e.close()}),!0)),t.handlers.closed=!0),t.handlers.minimized||(t.options.onminimized.push(()=>(t.slaves.forEach(e=>{e.minimize()}),!0)),t.handlers.minimized=!0),t.handlers.maximized||(t.options.onmaximized.push(()=>(t.slaves.forEach(e=>{if(e.normalize(),e.slaveconfig.linkSlaveHeight){let i=window.getComputedStyle(t).height;e.resize({height:i})}if(e.slaveconfig.linkSlaveWidth){let i=window.getComputedStyle(t).width;e.resize({width:i})}e.reposition()}),!0)),t.handlers.maximized=!0),t.handlers.normalized||(t.options.onnormalized.push(()=>(t.slaves.forEach(e=>{if(e.normalize(),e.slaveconfig.linkSlaveHeight){let i=window.getComputedStyle(t).height;e.resize({height:i})}if(e.slaveconfig.linkSlaveWidth){let i=window.getComputedStyle(t).width;e.resize({width:i})}e.reposition()}),!0)),t.handlers.normalized=!0);let n=Object.assign({},this.slaveconfig.position,{of:t,minLeft:!1,minTop:!1,maxLeft:!1,maxTop:!1,autoposition:!1});if(n.my||(n.my=s.position.my),n.at||(n.at=s.position.at),o.options.position=n,["smallify","minimize","normalize","maximize"].forEach(function(e){o.setControlStatus(e,"remove")}),this.slaveconfig.linkSlaveHeight){let e=window.getComputedStyle(t).height;o.resize({height:e})}if(this.slaveconfig.linkSlaveWidth){let e=window.getComputedStyle(t).width;o.resize({width:e})}return o.reposition(n),o.dragit("disable"),o.resizeit("disable"),o.options.minimizeTo=!1,o.options.onclosed.push(()=>{t.slaves.delete(o)}),o.options.onfronted.push(e=>{let i=e.style.zIndex;t.style.zIndex=i,t.slaves.forEach(e=>{e.style.zIndex=i})}),t.reposSlave=function(){document.querySelector("#"+o.id)&&o.reposition()},t.options.dragit&&t.options.dragit.drag.push(t.reposSlave),t.resizeSlave=function(){if(document.querySelector("#"+o.id)){if(o.reposition(),o.slaveconfig.linkSlaveHeight){let e=window.getComputedStyle(t).height;o.resize({height:e})}if(o.slaveconfig.linkSlaveWidth){let e=window.getComputedStyle(t).width;o.resize({width:e})}}},t.options.resizeit&&t.options.resizeit.resize.push(t.resizeSlave),t.slaves.add(o),o.dockedTo=t.id,this.slaveconfig.callback&&this.slaveconfig.callback.call(o,t,o),o}dockPanel.getVersion=function(){return"1.1.2"},dockPanel.getDate=function(){return"2020-01-14 14:00"},jsPanel.extend({dock:dockPanel});