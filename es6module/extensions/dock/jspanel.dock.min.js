import{jsPanel}from"../../jspanel.js";function dockPanel(e,i){let t,o={position:{my:"left-top",at:"right-top"},linkSlaveHeight:!1,linkSlaveWidth:!1,callback:!1},s=document.getElementById(this.id);if(this.slaveconfig=Object.assign({},o,e),!(t=this.slaveconfig.master&&1===this.slaveconfig.master.nodeType?this.slaveconfig.master:document.querySelector(this.slaveconfig.master))){if(jsPanel.errorReporting)try{throw new jsPanel.jsPanelError("&#9664; COULD NOT DOCK PANEL &#9658;<br>The master panel does not exist in the document.")}catch(e){jsPanel.error(e),i&&i.call(s,s)}return!1}t.slaves||(t.slaves=new Set),t.handlers||(t.handlers={}),t.handlers.fronted||(t.options.onfronted.push(()=>{let e=t.style.zIndex;return t.slaves.forEach(i=>{i.style.zIndex=e}),!0}),t.handlers.fronted=!0),t.handlers.smallified||(t.options.onsmallified.push(()=>(t.slaves.forEach(e=>{e.smallify().reposition()}),!0)),t.handlers.smallified=!0),t.handlers.unsmallified||(t.options.onunsmallified.push(()=>(t.slaves.forEach(e=>{e.unsmallify().reposition()}),!0)),t.handlers.unsmallified=!0),t.handlers.closed||(t.options.onclosed.push(()=>(t.slaves.forEach(e=>{e.close()}),!0)),t.handlers.closed=!0),t.handlers.minimized||(t.options.onminimized.push(()=>(t.slaves.forEach(e=>{e.minimize()}),!0)),t.handlers.minimized=!0),t.handlers.maximized||(t.options.onmaximized.push(()=>(t.slaves.forEach(e=>{if(e.normalize(),e.slaveconfig.linkSlaveHeight){let i=window.getComputedStyle(t).height;e.resize({height:i})}if(e.slaveconfig.linkSlaveWidth){let i=window.getComputedStyle(t).width;e.resize({width:i})}e.reposition()}),!0)),t.handlers.maximized=!0),t.handlers.normalized||(t.options.onnormalized.push(()=>(t.slaves.forEach(e=>{if(e.normalize(),e.slaveconfig.linkSlaveHeight){let i=window.getComputedStyle(t).height;e.resize({height:i})}if(e.slaveconfig.linkSlaveWidth){let i=window.getComputedStyle(t).width;e.resize({width:i})}e.reposition()}),!0)),t.handlers.normalized=!0);let n=Object.assign({},this.slaveconfig.position,{of:t,minLeft:!1,minTop:!1,maxLeft:!1,maxTop:!1,autoposition:!1});if(n.my||(n.my=o.position.my),n.at||(n.at=o.position.at),s.options.position=n,["smallify","minimize","normalize","maximize"].forEach(function(e){s.setControlStatus(e,"remove")}),this.slaveconfig.linkSlaveHeight){let e=window.getComputedStyle(t).height;s.resize({height:e})}if(this.slaveconfig.linkSlaveWidth){let e=window.getComputedStyle(t).width;s.resize({width:e})}return s.reposition(n),s.dragit("disable"),s.resizeit("disable"),s.options.minimizeTo=!1,s.options.onclosed.push(()=>{t.slaves.delete(s)}),s.options.onfronted.push(e=>{let i=e.style.zIndex;t.style.zIndex=i,t.slaves.forEach(e=>{e.style.zIndex=i})}),t.reposSlave=function(){document.querySelector("#"+s.id)&&s.reposition()},t.options.dragit&&t.options.dragit.drag.push(t.reposSlave),t.resizeSlave=function(){if(document.querySelector("#"+s.id)){if(s.reposition(),s.slaveconfig.linkSlaveHeight){let e=window.getComputedStyle(t).height;s.resize({height:e})}if(s.slaveconfig.linkSlaveWidth){let e=window.getComputedStyle(t).width;s.resize({width:e})}}},t.options.resizeit&&t.options.resizeit.resize.push(t.resizeSlave),t.slaves.add(s),s.dockedTo=t.id,this.slaveconfig.callback&&this.slaveconfig.callback.call(s,t,s),s}dockPanel.getVersion=function(){return"1.1.2"},dockPanel.getDate=function(){return"2020-01-14 14:00"},jsPanel.extend({dock:dockPanel});